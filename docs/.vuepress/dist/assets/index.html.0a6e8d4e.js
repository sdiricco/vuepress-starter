import{_ as o,o as e,c,b as s,d as t,a as p,e as n,r as i}from"./app.30ed76b5.js";var l="/assets/nodejs.5121cfad.png";const u={},r=p('<h1 id="introduzione" tabindex="-1"><a class="header-anchor" href="#introduzione" aria-hidden="true">#</a> Introduzione</h1><p><img src="'+l+'" alt="Nodejs"></p><h2 id="cos-e-node" tabindex="-1"><a class="header-anchor" href="#cos-e-node" aria-hidden="true">#</a> Cos&#39;\xE8 node</h2>',3),k={href:"https://nodejs.org/it/",target:"_blank",rel:"noopener noreferrer"},d=n("Nodejs"),v=n(" \xE8 un Javascript runtime environment, permette l'esecuzione di javascript al di fuori del browser."),m=p(`<p>Node \xE8 un&#39;applicazione <code>c++</code> che interpreta il codice Javascript attraverso il V8 engine, un software estratto da chrome, e lo converte in linguaggio macchina.</p><h2 id="caratteristiche" tabindex="-1"><a class="header-anchor" href="#caratteristiche" aria-hidden="true">#</a> Caratteristiche</h2><ul><li>Single thread</li><li>E&#39; basato su un meccanismo a eventi, event-loop</li><li>Permette l&#39;esecuzione di codice asincrono e non bloccante, non-blocking code</li></ul><h2 id="dove-eseguo-node" tabindex="-1"><a class="header-anchor" href="#dove-eseguo-node" aria-hidden="true">#</a> Dove eseguo Node?</h2><p>E&#39; un&#39;applicazione e pu\xF2 essere lanciata da terminale. Crea un file javascript, <code>esempio.js</code> e scrivi un po&#39; di codice.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> names <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;Luca&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Mario&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Giovanni&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Laura&quot;</span><span class="token punctuation">]</span>

<span class="token keyword">const</span> longNames <span class="token operator">=</span> names<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> name<span class="token punctuation">.</span>length <span class="token operator">&gt;=</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>longNames<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Apri un terminale all&#39;interno della cartella di progetto e lancialo con node</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">node</span> esempio.js
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h1 id="globals" tabindex="-1"><a class="header-anchor" href="#globals" aria-hidden="true">#</a> Globals</h1><p>In node non esiste n\xE8 l&#39;oggetto <code>window</code> n\xE8 l&#39;oggetto <code>document</code>. Queste globali sono interpretate solo dalle web api del browser.</p><p>In node alcuni oggetti locali sono:</p><ul><li><code>__dirname</code>: percorso alla directory corrente</li><li><code>__filename</code>: percorso al file corrente</li><li><code>module</code>: informazioni sul modulo corrente</li><li><code>process</code>: informazioni sull&#39;ambiente di esecuzione</li></ul>`,12),g=n("Tutti gli oggetti globali li trovi su "),b={href:"https://nodejs.org/api/globals.html",target:"_blank",rel:"noopener noreferrer"},q=n("Globals"),y=s("h1",{id:"moduli",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#moduli","aria-hidden":"true"},"#"),n(" Moduli")],-1),h=n("I moduli sono pacchetti di codice javascript che permettono di organizzare ed estendere le funzionalit\xE0 del software. Node presenta svariati moduli "),f=s("code",null,"built-in",-1),x=n(" che possono essere richiamati ed utilizzati. E' pratica comune inoltre scrivere moduli per oganizzare il codice a seconda delle funzionalit\xE0. In questo caso i moduli saranno semplicemente dei file Javascript organizzati a nostro piacimento. Infine \xE8 possibile estendere le funzionalit\xE0 standard offerte da node attraverso l'utilizzo di pacchetti esterni scaricabili attraverso "),w={href:"https://www.npmjs.com/",target:"_blank",rel:"noopener noreferrer"},j=n("npm"),z=n(", Node Package Manager."),_=p(`<ul><li>moduli <code>built-in</code>: inclusi in node</li><li>moduli interni: privati, creati e utilizzati all&#39;interno del codice</li><li>moduli esterni: pubblici, scaricabili tramite npm.</li></ul><h1 id="moduli-interni" tabindex="-1"><a class="header-anchor" href="#moduli-interni" aria-hidden="true">#</a> Moduli interni</h1><p>Vediamo come si crea un modulo, come si esporta per renderlo visibile e come si importa in uno specifico modulo.</p><p>Crea un file Javascript, <code>constants.js</code></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//constants.js</span>

<span class="token keyword">const</span> names <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;Luca&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Mario&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Giovanni&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Laura&quot;</span><span class="token punctuation">]</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>names<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>module.exports</code> \xE8 un oggetto e permette di <strong>esportare</strong> verso l&#39;ambiente node altri oggetti o funzioni, variabili, classi..</p><p>All&#39;interno del file principale di esecuzione node, ad esempio <code>index.js</code> importa il modulo.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//index.js</span>
<span class="token keyword">const</span> constants <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./constants&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> longNames <span class="token operator">=</span> constants<span class="token punctuation">.</span>names<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> name<span class="token punctuation">.</span>length <span class="token operator">&gt;=</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>longNames<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Sintassi alternativa:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//index.js</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span>names<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./constants&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> longNames <span class="token operator">=</span> names<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> name<span class="token punctuation">.</span>length <span class="token operator">&gt;=</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>longNames<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>require()</code> permette quindi l&#39;import dei moduli.</p><p><strong>Attenzione</strong> che durante l&#39;import potrebbe essere eseguito del codice dal modulo</p><p>Vediamo un esempio:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//constants.js</span>

<span class="token keyword">const</span> names <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;Luca&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Mario&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Giovanni&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Laura&quot;</span><span class="token punctuation">]</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>names<span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>names<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//index.js</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span>names<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./constants&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> longNames <span class="token operator">=</span> names<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> name<span class="token punctuation">.</span>length <span class="token operator">&gt;=</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>longNames<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//output</span>
<span class="token comment">//[&quot;Luca&quot;, &quot;Mario&quot;, &quot;Giovanni&quot;, &quot;Laura&quot;]</span>
<span class="token comment">//[ &#39;Mario&#39;, &#39;Giovanni&#39;, &#39;Laura&#39; ]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>require</code> comporta l&#39;esecuzione di <code>console.log(names);</code> all&#39;interno di <code>constants.js</code> e tutto il codice eseguibile.</p><h1 id="moduli-built-in" tabindex="-1"><a class="header-anchor" href="#moduli-built-in" aria-hidden="true">#</a> Moduli Built-in</h1>`,17),P=n("Su "),L={href:"https://nodejs.org/dist/latest-v16.x/docs/api/",target:"_blank",rel:"noopener noreferrer"},M=n("Nodejs/Api"),V=n(" trovi tutte le API esposte da node con la relativa documentazione."),T=s("p",null,"Vediamo a a titolo d'esempio qualche modulo built-in",-1),N=s("h2",{id:"os-path-fs",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#os-path-fs","aria-hidden":"true"},"#"),n(" Os, path, fs")],-1),C={href:"https://nodejs.org/api/os.html",target:"_blank",rel:"noopener noreferrer"},I=n("os"),A=n(" fornisce utility e informazioni relative al sistema operativo come l'architettura, l'endianess, la memoria libera, la release, le versioni in utilizzo e molto altro."),E=p(`<div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> os <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;os&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span><span class="token function">arch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//x64</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span><span class="token function">platform</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//linux</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span><span class="token function">totalmem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//8029188096</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,1),R={href:"https://nodejs.org/api/path.html",target:"_blank",rel:"noopener noreferrer"},F=n("path"),S=n(" forisce utility per l'eleaborazione dei path come la creazione di path relativi o assoluti, interpretazione e decodifica di path, separatori in base al sistema operativo corrente"),H=p(`<div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> filePath <span class="token operator">=</span> <span class="token string">&quot;testo.txt&quot;</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">///home/s/repository/wiki-programming-notes/docs/corsi/nodejs/code/testo.txt</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">basename</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//testo.txt</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//{ root: &#39;&#39;, dir: &#39;&#39;, base: &#39;testo.txt&#39;, ext: &#39;.txt&#39;, name: &#39;testo&#39; }</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,1),G={href:"https://nodejs.org/api/fs.html",target:"_blank",rel:"noopener noreferrer"},B=n("fs"),U=n(" consente di accedere al file system quindi creare/eliminare file/directory, leggere/scrivere file. Consiglio di usare fin da subito le funzioni di "),D=s("code",null,"fs/promises",-1),J=n(" che utilizza promise, piuttosto che il modulo "),O=s("code",null,"fs",-1),X=n(" evitando di lavorare con funzioni sincrone o asincrone ma con il meccanismo delle callback"),Z=p(`<div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs/promises&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> filePath <span class="token operator">=</span> <span class="token string">&quot;testo.txt&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">writeLines</span><span class="token punctuation">(</span><span class="token parameter">file<span class="token punctuation">,</span> data<span class="token punctuation">,</span> lines</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> lines<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> line <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">line </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>i<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>data<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">\\n</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span>file<span class="token punctuation">,</span> line<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">flag</span><span class="token operator">:</span> <span class="token string">&quot;a&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>


  <span class="token keyword">await</span> <span class="token function">writeLines</span><span class="token punctuation">(</span>filePath<span class="token punctuation">,</span> <span class="token string">&quot;Lorem ipsum&quot;</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span>filePath<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">encoding</span><span class="token operator">:</span> <span class="token string">&quot;utf-8&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> arr <span class="token operator">=</span> result<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;\\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">await</span> fs<span class="token punctuation">.</span><span class="token function">rm</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/*
output
line 0: Lorem ipsum
line 1: Lorem ipsum
line 2: Lorem ipsum
line 3: Lorem ipsum
line 4: Lorem ipsum
line 5: Lorem ipsum
line 6: Lorem ipsum
line 7: Lorem ipsum
line 8: Lorem ipsum
line 9: Lorem ipsum

[
  &#39;line 0: Lorem ipsum&#39;,
  &#39;line 1: Lorem ipsum&#39;,
  &#39;line 2: Lorem ipsum&#39;,
  &#39;line 3: Lorem ipsum&#39;,
  &#39;line 4: Lorem ipsum&#39;,
  &#39;line 5: Lorem ipsum&#39;,
  &#39;line 6: Lorem ipsum&#39;,
  &#39;line 7: Lorem ipsum&#39;,
  &#39;line 8: Lorem ipsum&#39;,
  &#39;line 9: Lorem ipsum&#39;,
  &#39;&#39;
]
*/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="modulo-http" tabindex="-1"><a class="header-anchor" href="#modulo-http" aria-hidden="true">#</a> Modulo http</h1>`,2),Q=n("Da "),W={href:"https://it.wikipedia.org/wiki/Server_web",target:"_blank",rel:"noopener noreferrer"},Y=n("Wikipedia"),$=n(", un server web \xE8 un'applicazione software che, in esecuzione su un server, \xE8 in grado di gestire le richieste di trasferimento di pagine web di un client, tipicamente un web browser. La comunicazione tra server e client avviene tramite il protocollo HTTP, che utilizza la porta TCP 80 (o 8080), o eventualmente la versione sicura HTTPS, che utilizza invece la 443. Su un server web risiedono dunque i siti web tramite hosting. L'insieme di tutti i server web interconnessi a livello mondiale d\xE0 vita al World Wide Web."),K=p(`<p>Esegui il seguente script node</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//index.js</span>
<span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;http&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>req<span class="token punctuation">.</span>url <span class="token operator">===</span> <span class="token string">&#39;/&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">&lt;h1&gt;Benvenuto nel sito&lt;/h1&gt;</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>req<span class="token punctuation">.</span>url <span class="token operator">===</span> <span class="token string">&#39;/contatti&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">&lt;h1&gt;Benvenuto nella sezione contatti&lt;/h1&gt;</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span><span class="token punctuation">{</span>
        res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">&lt;h1&gt;Errore&lt;/h1&gt;&lt;p&gt;Torna alla &lt;a href=&quot;/&quot;&gt;home&lt;/a&gt;&lt;/p&gt;</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">8080</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Apri da browser <code>http://localhost:8080/</code>, ti ritroverai nella pagina principale cio\xE8 nella root o home. Puoi provare a passare alla pagina contatti, <code>http://localhost:8080/contatti</code> o a una pagina inesistente, <code>http://localhost:8080/ilmioprofilo</code></p><h1 id="moduli-esterni-npm" tabindex="-1"><a class="header-anchor" href="#moduli-esterni-npm" aria-hidden="true">#</a> Moduli esterni - NPM</h1>`,4),nn={href:"https://www.npmjs.com/",target:"_blank",rel:"noopener noreferrer"},sn=n("NPM"),an=n(", node package manager, \xE8 una repository contenente pacchetti di codice javascript scaricabili e installabili gratuitamente."),tn=p(`<p>All&#39;installazione di node \xE8 associata l&#39;installazione di npm. Assicurati che sia installato digitando:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> -v
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,2),pn=n("Proviamo ad installare un pacchetto molto comune, "),on={href:"https://www.npmjs.com/package/lodash",target:"_blank",rel:"noopener noreferrer"},en=n("lodash"),cn=n(", un pacchetto che permette di lavorare in modo semplificato con array/oggetti."),ln=n("Collegandosi sulla pagina relativa a "),un={href:"https://www.npmjs.com/package/lodash",target:"_blank",rel:"noopener noreferrer"},rn=n("lodash"),kn=n(", in alto a sinistra troverai il comando da utilizzare per installarlo."),dn=p(`<div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> i lodash
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Lanciando il comando all&#39;interno della tua directory di progetto vedrai che verranno aggiunti i file <code>package.json</code>, <code>package-lock.json</code> e la directory <code>node_modules</code>.</p><p>Puoi aprire i file <code>package.json</code>, <code>package-lock.json</code>. Troverai qualcosa come:</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token comment">//package.json</span>
<span class="token punctuation">{</span>
  <span class="token property">&quot;dependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;lodash&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^4.17.21&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token comment">//package.json</span>
<span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;code&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;lockfileVersion&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  <span class="token property">&quot;requires&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">&quot;packages&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;dependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;lodash&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^4.17.21&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;node_modules/lodash&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;4.17.21&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;resolved&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://registry.npmjs.org/lodash/-/lodash-4.17.21.tgz&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;integrity&quot;</span><span class="token operator">:</span> <span class="token string">&quot;sha512-v2kDEe57lecTulaDIuNTPy3Ry4gLGJ6Z1O3vE1krgXZNrsQ+LFTGHVxVjcXPs17LhbZVGedAJv8XZ1tvj5FvSg==&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;dependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;lodash&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;4.17.21&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;resolved&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://registry.npmjs.org/lodash/-/lodash-4.17.21.tgz&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;integrity&quot;</span><span class="token operator">:</span> <span class="token string">&quot;sha512-v2kDEe57lecTulaDIuNTPy3Ry4gLGJ6Z1O3vE1krgXZNrsQ+LFTGHVxVjcXPs17LhbZVGedAJv8XZ1tvj5FvSg==&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>In <code>node_modules</code> invece troverai una directory dedicata a <code>lodash</code> contenente il codice sorgente e tutte le eventuali <strong>dipendenze</strong> utili a <code>lodash</code> per funzionare.</p><h1 id="package-json" tabindex="-1"><a class="header-anchor" href="#package-json" aria-hidden="true">#</a> Package.json</h1><p>L&#39;installazione di un pacchetto node comporta la creazione del file <code>package.json</code>, <code>package-lock.json</code> e la directory <code>node_modules</code>. Il <code>package.json</code> \xE8 un file importante per un progetto node, contiene tutte le informazioni necessaria allo sviluppo del progetto e alle dipendenze esterne.</p><p>Per creare correttamente un progetto node si utilizza lo script <code>npm init</code> o <code>npm init -y</code></p><ul><li><code>npm init</code>: chiede all&#39;utente una serie di informazioni di progetto e crea il <code>package.json</code></li><li><code>npm init -y</code>: crea un <code>package.json</code> con valori di default.</li></ul><p>Lancia lo script <code>npm init</code> o <code>npm init -y</code> e apri il <code>package.json</code>,</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token comment">//package.json</span>
<span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;code&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.0.0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;main&quot;</span><span class="token operator">:</span> <span class="token string">&quot;index.js&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;test&quot;</span><span class="token operator">:</span> <span class="token string">&quot;echo \\&quot;Error: no test specified\\&quot; &amp;&amp; exit 1&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;keywords&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;license&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ISC&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>A questo punto il progetto node \xE8 inizializzato correttamente e puoi passare alla creazione di file o scaricare pacchetti da npm.</p><h2 id="package-lock-json" tabindex="-1"><a class="header-anchor" href="#package-lock-json" aria-hidden="true">#</a> Package-lock.json</h2><p>Nel <code>package-lock.json</code> sono memorizzate le versioni esatte dei pacchetti utilizzate dal progetto, vediamo quando pu\xF2 essere utile. Supponi di installare lodash. Nel <code>package.json</code> troverai il pacchetto installato tra le <code>dependecies</code></p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;dependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;lodash&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^4.17.21&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>La nomenclatura <code>^xx.xx.xx</code> indica che la versione del pacchetto pu\xF2 essere <code>xx.xx.xx</code> o superiore.</p><p>All&#39;interno del <code>package-lock.json</code> trovi la versione esatta:</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token property">&quot;node_modules/lodash&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;4.17.21&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;resolved&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://registry.npmjs.org/lodash/-/lodash-4.17.21.tgz&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;integrity&quot;</span><span class="token operator">:</span> <span class="token string">&quot;sha512-v2kDEe57lecTulaDIuNTPy3Ry4gLGJ6Z1O3vE1krgXZNrsQ+LFTGHVxVjcXPs17LhbZVGedAJv8XZ1tvj5FvSg==&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Immagina adesso che il tuo progetto abbia diversi pacchetti e che sia in sviluppo da molto tempo. Finch\xE8 mantieni il <code>package-lock.json</code> le versioni rimangono quelle relative all&#39;ultima volta che il pacchetto \xE8 stato installato. I pacchetti su npm tuttavia sono in constante aggiornamento quindi \xE8 probabile che installando nuovamente determinati pacchetti le versioni si aggiornino. Ora, se tu dovessi cancellare il <code>package-lock.json</code> e reinstallare tutti i pacchetti, verrebbero installate le ultime versioni. Nella maggior parte dei casi aggiornare un pacchetto o pi\xF9 pacchetti non rappresenta un problema ma in alcuni casi specifici potrebbe diventarlo dal momento che possono essere utilizzate delle vecchie sintassi considerate <code>deprecated</code> e, a volte, potrebbe compromettere il funzionamento del software. Il <code>package-lock.json</code> garantisce che l&#39;installazione dei pacchetti sia relativa alla specifica versione riportata all&#39;interno dello stesso. Quindi, al fine di ricostruire esattamente l&#39;ambiente di sviluppo di un particolare progetto \xE8 necessario avere soltanto il <code>package.json</code> e il <code>package-lock.json</code>. La directory <code>node_modules</code> non \xE8 importante dal momento che con <code>npm i</code>, per mezzo del <code>package.json</code> e <code>package-lock.json</code> verrebbe esattamente ricostruita. Se il tuo progetto \xE8 sottoposto a versionamento (git, svn) la cartella <code>node_modules</code> va esclusa dai file da committare.</p><h2 id="qualche-dettaglio-in-piu-sulle-versioni" tabindex="-1"><a class="header-anchor" href="#qualche-dettaglio-in-piu-sulle-versioni" aria-hidden="true">#</a> Qualche dettaglio in pi\xF9 sulle versioni</h2><p>Ogni pacchetto \xE8 rappresentato da un numero di versione che comprende tre cifre: <code>x.y.z</code></p><ul><li><code>x</code>: <strong>major update</strong>, aggiornamenti importanti. Potrebbero compromettere l&#39;intera struttura del pacchetto ed essere non retrocompatibili</li><li><code>y</code>: <strong>minor update</strong>, aggiornamenti minori. Potrebbero aggiungere funzionalit\xE0 aggiuntive anche non completamente testate o risolvere alcuni bugfix ma garantiscono retrocompatibilit\xE0 a parit\xE0 di minor update</li><li><code>z</code>: <strong>patch</strong>, bug fix, aggiornamenti minimi. Non compromettono la stabilit\xE0 del pacchetto</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>x.y.z
<span class="token operator">|</span> <span class="token operator">|</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token operator">|</span> patch
<span class="token operator">|</span> minor update
major update
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="qualche-comando-npm" tabindex="-1"><a class="header-anchor" href="#qualche-comando-npm" aria-hidden="true">#</a> Qualche comando npm</h1><p>Vediamo una lista di comandi <code>npm</code> utili.</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> -v
<span class="token function">npm</span> init
<span class="token function">npm</span> init -y
<span class="token function">npm</span> i package
<span class="token function">npm</span> i -g package
<span class="token function">npm</span> unistall package
<span class="token function">npm</span> i package --save-dev
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>In particolare:</p><ul><li><code>npm -v</code>: check sulla versione installata</li><li><code>npm init</code>: inizializzazione progetto node</li><li><code>npm init -y</code>: inizializzazione progetto node con parametri di default</li><li><code>npm i lodash</code>: installazione locale del pacchetto <code>lodash</code>. Inserisce il pacchetto tra le <code>dependencies</code> del <code>package.json</code></li><li><code>npm i -g node-gyp</code>: installazione globale (a livello di sistema e non di progetto) del pacchetto <code>npde-gyp</code>. In particolare questo pacchetto \xE8 utili per la compilazione dei moduli nativi <code>node</code></li><li><code>npm unistall lodash</code>: disinstallazione del pacchetto <code>lodash</code></li><li><code>npm i nodemon --save-dev</code>: installazione del pacchetto <code>nodemon</code> tra le <code>dev-dependencies</code> ovvero tra le dipendenze di sviluppo del progetto ma non necessarie al funzionamento del software.</li></ul><h2 id="nodemon" tabindex="-1"><a class="header-anchor" href="#nodemon" aria-hidden="true">#</a> Nodemon</h2><p><code>nodemon</code> sta in ascolto sui cambiamenti dello script <code>node</code> in esecuzione e ricompila al salvataggio. Evita di dover ogni volta rilanciare lo script da terminale.</p><p>Per usare <code>nodemon</code>, installa il pacchetto e aggiungilo alle <code>dev-dependencies</code>. Non \xE8 una dipendenza del codice ma solo per lo sviluppo del progetto:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> i nodemon --save-dev
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Aggiungi uno script nella sezione <code>script</code> del <code>package.json</code>:</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;express&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.0.0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;main&quot;</span><span class="token operator">:</span> <span class="token string">&quot;index.js&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;test&quot;</span><span class="token operator">:</span> <span class="token string">&quot;echo \\&quot;Error: no test specified\\&quot; &amp;&amp; exit 1&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;start&quot;</span><span class="token operator">:</span> <span class="token string">&quot;nodemon index.js&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;keywords&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;license&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ISC&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;dependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;express&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^4.17.2&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;devDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;nodemon&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^2.0.15&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>A questo punto lanciando:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> start
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>verr\xE0 eseguito lo script <code>nodemon index.js</code> che lancer\xE0 lo script <code>index.js</code> con node restando in ascolto sui cambiamenti.</p><h1 id="event-loop" tabindex="-1"><a class="header-anchor" href="#event-loop" aria-hidden="true">#</a> Event loop</h1>`,39),vn=n("Se vuoi sapere qualche dettaglio in pi\xF9 su come funziona node, ti invito a visitare code "),mn={href:"https://www.freecodecamp.org/news/nodejs-eventloop-tutorial/",target:"_blank",rel:"noopener noreferrer"},gn=n("Event Loops in NodeJS \u2013 Beginner's Guide to Synchronous and Asynchronous Code"),bn=n(" e "),qn={href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/EventLoop?retiredLocale=it",target:"_blank",rel:"noopener noreferrer"},yn=n("Concurrency model and the event loop"),hn=n(". Spesso troverai queste parole chiave:"),fn=p(`<ul><li>single thread</li><li>async</li><li>non blocking code</li><li>event queue</li><li>call stack</li></ul><p>La programmazione in Javascript \xE8 fortemente orientata agli eventi ed \xE8 di natura asincrona.</p><ul><li>Quando arriva un evento, node lo registra nella coda degli eventi.</li><li>Quando una funzione asincrona viene invocata, l&#39;esecuzione passa in background e il processo node va avanti.</li><li>Se una funzione asincrona viene invocata con la keyword <code>await</code>, node non prosegue con l&#39;esecuzione del codice ma continua ad eseguire gli eventi. Quando la funzione asincrona termina il processo node continua con lo statemeant successivo.</li><li>Tutto il codice sincrono in Javascript ha massima priorit\xE0 ed \xE8 eseguito all&#39;avvio del processo node o al <code>require</code> del modulo.</li><li>La gerarchia delle priorit\xE0 continua con gli eventi e con le chiamate a funzione delle relative callback registrate da una funzione asincrona</li></ul><h1 id="modulo-events" tabindex="-1"><a class="header-anchor" href="#modulo-events" aria-hidden="true">#</a> Modulo Events</h1><p>Il modulo <code>events</code> ti consente di generare eventi o di estendere moduli software che gi\xE0 utilizzano eventi.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> events <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;events&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> eventEmitter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">events<span class="token punctuation">.</span>EventEmitter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
eventEmitter<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;my-event&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;data received successfully.&quot;</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
eventEmitter<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">&quot;my-event&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">success</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">,</span>
  <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">&quot;right-mode&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/*
output
data received successfully. { success: true, code: 12, message: &#39;right-mode&#39; }
*/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="stream" tabindex="-1"><a class="header-anchor" href="#stream" aria-hidden="true">#</a> Stream</h2><p>Attraverso lo stream, sarai in grado di leggere un flusso di dati continuo in modo efficiente. Per capire il concetto di stream immagina di voler vedere un film da internet. Hai due opzioni:</p><ul><li>Ti colleghi a un sito di streaming come <a href="">Netflix</a> o <a href="">Amazon prime video</a>, scegli un film e lo esegui</li><li>Scarichi un film in locale e lo esegui.</li></ul><p>Attraverso lo streaming sei in grado di mandare in in esecuzione un film istantaneamente. Non appena sar\xF2 pronto il primo pacchetto di dati verr\xE0 caricato il secondo durante l&#39;esecuzione del video. Questo tipo di modalit\xE0 permette all&#39;utente una fruizione istantanea del contenuto. Scegliendo invece di voler scaricare l&#39;intero film in locale, avrai bisogno di aspettare del tempo prima di poterlo eseguire.</p><p>Vediamo un esempio molto simile con la lettura di un file di testo.</p><p>No stream, lettura completa</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs/promises&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">main</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">&quot;./file.txt&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">encoding</span><span class="token operator">:</span> <span class="token string">&quot;utf8&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Utilizzo lo stream</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> stream <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">createReadStream</span><span class="token punctuation">(</span><span class="token string">&#39;file.txt&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
stream<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;data&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token comment">//stampa buffer da 64Kbyte</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="express" tabindex="-1"><a class="header-anchor" href="#express" aria-hidden="true">#</a> Express</h2><h3 id="express-01" tabindex="-1"><a class="header-anchor" href="#express-01" aria-hidden="true">#</a> express - 01</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;express&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//homepage</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">&lt;h1&gt;Home&lt;/h1&gt;</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//about</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/about&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">&lt;h1&gt;About&lt;/h1&gt;</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//contatti</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/contatti&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">&lt;h1&gt;Contatti&lt;/h1&gt;</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token string">&#39;*&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">&lt;h1&gt;Risorsa non trovata&lt;/h1&gt;</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="express-02" tabindex="-1"><a class="header-anchor" href="#express-02" aria-hidden="true">#</a> express - 02</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;express&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span><span class="token string">&#39;public&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//homepage</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">sendFile</span><span class="token punctuation">(</span><span class="token string">&quot;homepage.html&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">root</span><span class="token operator">:</span> __dirname <span class="token operator">+</span> <span class="token string">&quot;/public&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//about</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/about&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">sendFile</span><span class="token punctuation">(</span><span class="token string">&quot;about.html&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">root</span><span class="token operator">:</span> __dirname <span class="token operator">+</span> <span class="token string">&quot;/public&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//contatti</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/contatti&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">sendFile</span><span class="token punctuation">(</span><span class="token string">&quot;contatti.html&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">root</span><span class="token operator">:</span> __dirname <span class="token operator">+</span> <span class="token string">&quot;/public&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token string">&#39;*&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">sendFile</span><span class="token punctuation">(</span><span class="token string">&quot;404.html&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">root</span><span class="token operator">:</span> __dirname <span class="token operator">+</span> <span class="token string">&quot;/public&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>IE=edge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Error<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>Error 404<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>pagina non trovata. Torna alla <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Homepage<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>IE=edge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>About<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>About<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>benvenuto in about<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>IE=edge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Contatti<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>Contatti<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>benvenuto nella sezione contatti<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>IE=edge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Homepage<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>Homepage<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>benvenuto nella hompage<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="express-03" tabindex="-1"><a class="header-anchor" href="#express-03" aria-hidden="true">#</a> express - 03</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;express&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span>persone<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./persone&#39;</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span>persone<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> persone <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">nome</span><span class="token operator">:</span> <span class="token string">&quot;Luca&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">cognome</span><span class="token operator">:</span> <span class="token string">&quot;Rossi&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">eta</span><span class="token operator">:</span> <span class="token string">&quot;25&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">indirizzo</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">citta</span><span class="token operator">:</span> <span class="token string">&quot;Milano&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">via</span><span class="token operator">:</span> <span class="token string">&quot;Via Torino&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">cap</span><span class="token operator">:</span> <span class="token string">&quot;56789&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">interessi</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Calcio&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Tennis&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">nome</span><span class="token operator">:</span> <span class="token string">&quot;Marta&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">cognome</span><span class="token operator">:</span> <span class="token string">&quot;Neri&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">eta</span><span class="token operator">:</span> <span class="token string">&quot;25&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">indirizzo</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">citta</span><span class="token operator">:</span> <span class="token string">&quot;Lucca&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">via</span><span class="token operator">:</span> <span class="token string">&quot;Via Roma&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">cap</span><span class="token operator">:</span> <span class="token string">&quot;56111&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">interessi</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Calcio&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Basket&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">nome</span><span class="token operator">:</span> <span class="token string">&quot;Marco&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">cognome</span><span class="token operator">:</span> <span class="token string">&quot;Verdi&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">eta</span><span class="token operator">:</span> <span class="token string">&quot;23&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">indirizzo</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">citta</span><span class="token operator">:</span> <span class="token string">&quot;Pistoia&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">via</span><span class="token operator">:</span> <span class="token string">&quot;Via Milano&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">cap</span><span class="token operator">:</span> <span class="token string">&quot;56113&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">interessi</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Ping pong&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Hockey&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>persone<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="express-04" tabindex="-1"><a class="header-anchor" href="#express-04" aria-hidden="true">#</a> express - 04</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;express&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> persone <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./persone&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#39;&lt;h1&gt;Homepage&lt;/h1&gt;&lt;a href=&quot;/persone&quot;&gt;vai su persone&lt;/a&gt;&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/persone&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> __persone <span class="token operator">=</span> persone<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">persona</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span>nome<span class="token punctuation">,</span> cognome<span class="token punctuation">,</span> eta<span class="token punctuation">}</span> <span class="token operator">=</span> persona<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>nome<span class="token punctuation">,</span> cognome<span class="token punctuation">,</span> eta<span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span>__persone<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//Posso inserire parametri a piacere attraverso l&#39;operatore &quot;:&quot;</span>
<span class="token comment">//Attenzione ai tipi!! Meglio usare stringhe visto che poi \xE8 il modo con cui possiamo interrogare i db</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/persone/:id&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>params<span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span>id<span class="token punctuation">}</span> <span class="token operator">=</span> req<span class="token punctuation">.</span>params<span class="token punctuation">;</span>
  <span class="token keyword">const</span> persona <span class="token operator">=</span> persone<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">persona</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> persona<span class="token punctuation">.</span>id <span class="token operator">===</span> id<span class="token punctuation">)</span>
  
  <span class="token comment">//Gestione dell&#39;errore</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>persona<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">404</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">messaggio</span><span class="token operator">:</span> <span class="token string">&quot;non trovato&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token number">404</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span>persona<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> persone <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">nome</span><span class="token operator">:</span> <span class="token string">&quot;Luca&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">cognome</span><span class="token operator">:</span> <span class="token string">&quot;Rossi&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">eta</span><span class="token operator">:</span> <span class="token string">&quot;25&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">indirizzo</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">citta</span><span class="token operator">:</span> <span class="token string">&quot;Milano&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">via</span><span class="token operator">:</span> <span class="token string">&quot;Via Torino&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">cap</span><span class="token operator">:</span> <span class="token string">&quot;56789&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">interessi</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Calcio&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Tennis&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">nome</span><span class="token operator">:</span> <span class="token string">&quot;Marta&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">cognome</span><span class="token operator">:</span> <span class="token string">&quot;Neri&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">eta</span><span class="token operator">:</span> <span class="token string">&quot;25&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">indirizzo</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">citta</span><span class="token operator">:</span> <span class="token string">&quot;Lucca&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">via</span><span class="token operator">:</span> <span class="token string">&quot;Via Roma&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">cap</span><span class="token operator">:</span> <span class="token string">&quot;56111&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">interessi</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Calcio&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Basket&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">nome</span><span class="token operator">:</span> <span class="token string">&quot;Marco&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">cognome</span><span class="token operator">:</span> <span class="token string">&quot;Verdi&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">eta</span><span class="token operator">:</span> <span class="token string">&quot;23&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">indirizzo</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">citta</span><span class="token operator">:</span> <span class="token string">&quot;Pistoia&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">via</span><span class="token operator">:</span> <span class="token string">&quot;Via Milano&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">cap</span><span class="token operator">:</span> <span class="token string">&quot;56113&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">interessi</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Ping pong&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Hockey&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>persone<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="express-05" tabindex="-1"><a class="header-anchor" href="#express-05" aria-hidden="true">#</a> express - 05</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;express&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> persone <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./persone&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#39;&lt;h1&gt;Homepage&lt;/h1&gt;&lt;a href=&quot;/persone&quot;&gt;vai su persone&lt;/a&gt;&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/persone&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> __persone <span class="token operator">=</span> persone<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">persona</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span>nome<span class="token punctuation">,</span> cognome<span class="token punctuation">,</span> eta<span class="token punctuation">}</span> <span class="token operator">=</span> persona<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>nome<span class="token punctuation">,</span> cognome<span class="token punctuation">,</span> eta<span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span>__persone<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//Posso inserire parametri a piacere attraverso l&#39;operatore &quot;:&quot;</span>
<span class="token comment">//Attenzione ai tipi!! Meglio usare stringhe visto che poi \xE8 il modo con cui possiamo interrogare i db</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/persone/:id&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>params<span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span>id<span class="token punctuation">}</span> <span class="token operator">=</span> req<span class="token punctuation">.</span>params<span class="token punctuation">;</span>
  <span class="token keyword">const</span> persona <span class="token operator">=</span> persone<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">persona</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> persona<span class="token punctuation">.</span>id <span class="token operator">===</span> id<span class="token punctuation">)</span>
  
  <span class="token comment">//Gestione dell&#39;errore</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>persona<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">404</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">messaggio</span><span class="token operator">:</span> <span class="token string">&quot;non trovato&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token number">404</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span>persona<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//La seguente \xE8 una query</span>
<span class="token comment">//http://localhost:3000/p1/search/?nome=Marta&amp;cognome=Neri</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/p1/search&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> 
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>query<span class="token punctuation">)</span> <span class="token comment">//{ nome: &#39;Marta&#39;, cognome: &#39;Neri&#39; }</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#39;&lt;h1&gt;query&lt;/h1&gt;&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//Faccio una ricerca per nome</span>
<span class="token comment">//prova con:</span>
<span class="token comment">//http://localhost:3000/p2/search/</span>
<span class="token comment">//http://localhost:3000/p2/search/?query=Marta</span>
<span class="token comment">//il primo caso ritorna tutti, il secondo ritorna solo quello con nome Marta.</span>
<span class="token comment">//</span>
<span class="token comment">//prova con</span>
<span class="token comment">//http://localhost:3000/p2/search/?query=M</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/p2/search&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> 
  <span class="token keyword">const</span> <span class="token punctuation">{</span>query<span class="token punctuation">,</span> limit<span class="token punctuation">}</span> <span class="token operator">=</span> req<span class="token punctuation">.</span>query
  <span class="token keyword">let</span> personeFiltered <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>persone<span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span><span class="token punctuation">(</span>query<span class="token punctuation">)</span><span class="token punctuation">{</span>
    personeFiltered <span class="token operator">=</span> personeFiltered<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">persona</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> persona<span class="token punctuation">.</span>nome<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span>query<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span>personeFiltered<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//Faccio una ricerca per nome e limite</span>
<span class="token comment">//Il limite ti permette di ricevere n elementi tra quelli validi</span>
<span class="token comment">//prova con:</span>
<span class="token comment">//http://localhost:3000/p3/search/</span>
<span class="token comment">//http://localhost:3000/p3/search/?limit=2</span>
<span class="token comment">//http://localhost:3000/p3/search/?query=M&amp;limit=2</span>
<span class="token comment">// </span>
<span class="token comment">//Il primo caso manda a schermo tutti </span>
<span class="token comment">//Il secondo manda a schermo i primi 2</span>
<span class="token comment">//Il terzo manda a schermo i primi due validi il cui nome inizia con M</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/p3/search&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> 
  <span class="token keyword">const</span> <span class="token punctuation">{</span>query<span class="token punctuation">,</span> limit<span class="token punctuation">}</span> <span class="token operator">=</span> req<span class="token punctuation">.</span>query
  <span class="token keyword">let</span> personeFiltered <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>persone<span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span><span class="token punctuation">(</span>query<span class="token punctuation">)</span><span class="token punctuation">{</span>
    personeFiltered <span class="token operator">=</span> personeFiltered<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">persona</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> persona<span class="token punctuation">.</span>nome<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span>query<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">if</span><span class="token punctuation">(</span>limit<span class="token punctuation">)</span><span class="token punctuation">{</span>
    personeFiltered <span class="token operator">=</span> personeFiltered<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token function">Number</span><span class="token punctuation">(</span>limit<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span>personeFiltered<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>


app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/p4/search&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> 
  <span class="token keyword">const</span> <span class="token punctuation">{</span>query<span class="token punctuation">,</span> limit<span class="token punctuation">}</span> <span class="token operator">=</span> req<span class="token punctuation">.</span>query
  <span class="token keyword">let</span> personeFiltered <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>persone<span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span><span class="token punctuation">(</span>query<span class="token punctuation">)</span><span class="token punctuation">{</span>
    personeFiltered <span class="token operator">=</span> personeFiltered<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">persona</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> persona<span class="token punctuation">.</span>nome<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span>query<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">if</span><span class="token punctuation">(</span>limit<span class="token punctuation">)</span><span class="token punctuation">{</span>
    personeFiltered <span class="token operator">=</span> personeFiltered<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token function">Number</span><span class="token punctuation">(</span>limit<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>personeFiltered<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//In questo caso \xE8 necessario il return perch\xE8 altrimenti manda due risposte</span>
    <span class="token comment">//c&#39;\xE8 anche il res.status() sotto questo if</span>
    <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token literal-property property">data</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span>personeFiltered<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> persone <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">nome</span><span class="token operator">:</span> <span class="token string">&quot;Luca&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">cognome</span><span class="token operator">:</span> <span class="token string">&quot;Rossi&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">eta</span><span class="token operator">:</span> <span class="token string">&quot;25&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">indirizzo</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">citta</span><span class="token operator">:</span> <span class="token string">&quot;Milano&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">via</span><span class="token operator">:</span> <span class="token string">&quot;Via Torino&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">cap</span><span class="token operator">:</span> <span class="token string">&quot;56789&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">interessi</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Calcio&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Tennis&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">nome</span><span class="token operator">:</span> <span class="token string">&quot;Marta&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">cognome</span><span class="token operator">:</span> <span class="token string">&quot;Neri&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">eta</span><span class="token operator">:</span> <span class="token string">&quot;25&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">indirizzo</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">citta</span><span class="token operator">:</span> <span class="token string">&quot;Lucca&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">via</span><span class="token operator">:</span> <span class="token string">&quot;Via Roma&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">cap</span><span class="token operator">:</span> <span class="token string">&quot;56111&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">interessi</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Calcio&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Basket&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">nome</span><span class="token operator">:</span> <span class="token string">&quot;Marco&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">cognome</span><span class="token operator">:</span> <span class="token string">&quot;Verdi&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">eta</span><span class="token operator">:</span> <span class="token string">&quot;23&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">indirizzo</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">citta</span><span class="token operator">:</span> <span class="token string">&quot;Pistoia&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">via</span><span class="token operator">:</span> <span class="token string">&quot;Via Milano&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">cap</span><span class="token operator">:</span> <span class="token string">&quot;56113&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">interessi</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Ping pong&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Hockey&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;3&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">nome</span><span class="token operator">:</span> <span class="token string">&quot;Maria&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">cognome</span><span class="token operator">:</span> <span class="token string">&quot;Livetti&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">eta</span><span class="token operator">:</span> <span class="token string">&quot;23&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">indirizzo</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">citta</span><span class="token operator">:</span> <span class="token string">&quot;Pistoia&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">via</span><span class="token operator">:</span> <span class="token string">&quot;Via Milano&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">cap</span><span class="token operator">:</span> <span class="token string">&quot;56113&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">interessi</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Ping pong&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Hockey&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;4&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">nome</span><span class="token operator">:</span> <span class="token string">&quot;Giovanni&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">cognome</span><span class="token operator">:</span> <span class="token string">&quot;Antonini&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">eta</span><span class="token operator">:</span> <span class="token string">&quot;23&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">indirizzo</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">citta</span><span class="token operator">:</span> <span class="token string">&quot;Pistoia&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">via</span><span class="token operator">:</span> <span class="token string">&quot;Via Milano&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">cap</span><span class="token operator">:</span> <span class="token string">&quot;56113&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">interessi</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Ping pong&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Hockey&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;5&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">nome</span><span class="token operator">:</span> <span class="token string">&quot;Metteo&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">cognome</span><span class="token operator">:</span> <span class="token string">&quot;Luisi&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">eta</span><span class="token operator">:</span> <span class="token string">&quot;23&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">indirizzo</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">citta</span><span class="token operator">:</span> <span class="token string">&quot;Pistoia&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">via</span><span class="token operator">:</span> <span class="token string">&quot;Via Milano&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">cap</span><span class="token operator">:</span> <span class="token string">&quot;56113&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">interessi</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Ping pong&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Hockey&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>persone<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="express-06" tabindex="-1"><a class="header-anchor" href="#express-06" aria-hidden="true">#</a> express - 06</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;express&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> persone <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./persone&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//Middleware</span>
<span class="token comment">//Sono funzioni che vengono eseguitedurante la richiesta, tra la richiesta e la risposta.</span>
<span class="token comment">//In genere i middleware sono moduli</span>

<span class="token keyword">const</span> <span class="token function-variable function">middlewareTest</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span>method<span class="token punctuation">,</span> url<span class="token punctuation">}</span> <span class="token operator">=</span> req<span class="token punctuation">;</span>
  <span class="token keyword">const</span> time <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMinutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;method&quot;</span><span class="token punctuation">,</span> method<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;url&quot;</span><span class="token punctuation">,</span> url<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;time&quot;</span><span class="token punctuation">,</span>time<span class="token punctuation">)</span>

  <span class="token comment">//next() \xE8 importante. Serve per passare allo &quot;step&quot; successivo</span>
  <span class="token comment">//senza next() non passa oltre e rimane bloccato</span>
  <span class="token comment">//potrei anche utilizzare res.send() ma a questo punto salto gli &quot;step&quot; successivi</span>
  <span class="token comment">//ad ogni modo next() o res.send() servono</span>
  <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/&#39;</span><span class="token punctuation">,</span> middlewareTest<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;Homepage&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>


app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/about&#39;</span><span class="token punctuation">,</span> middlewareTest<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;About&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> persone <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">nome</span><span class="token operator">:</span> <span class="token string">&quot;Luca&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">cognome</span><span class="token operator">:</span> <span class="token string">&quot;Rossi&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">eta</span><span class="token operator">:</span> <span class="token string">&quot;25&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">indirizzo</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">citta</span><span class="token operator">:</span> <span class="token string">&quot;Milano&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">via</span><span class="token operator">:</span> <span class="token string">&quot;Via Torino&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">cap</span><span class="token operator">:</span> <span class="token string">&quot;56789&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">interessi</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Calcio&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Tennis&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">nome</span><span class="token operator">:</span> <span class="token string">&quot;Marta&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">cognome</span><span class="token operator">:</span> <span class="token string">&quot;Neri&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">eta</span><span class="token operator">:</span> <span class="token string">&quot;25&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">indirizzo</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">citta</span><span class="token operator">:</span> <span class="token string">&quot;Lucca&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">via</span><span class="token operator">:</span> <span class="token string">&quot;Via Roma&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">cap</span><span class="token operator">:</span> <span class="token string">&quot;56111&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">interessi</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Calcio&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Basket&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">nome</span><span class="token operator">:</span> <span class="token string">&quot;Marco&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">cognome</span><span class="token operator">:</span> <span class="token string">&quot;Verdi&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">eta</span><span class="token operator">:</span> <span class="token string">&quot;23&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">indirizzo</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">citta</span><span class="token operator">:</span> <span class="token string">&quot;Pistoia&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">via</span><span class="token operator">:</span> <span class="token string">&quot;Via Milano&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">cap</span><span class="token operator">:</span> <span class="token string">&quot;56113&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">interessi</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Ping pong&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Hockey&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;3&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">nome</span><span class="token operator">:</span> <span class="token string">&quot;Maria&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">cognome</span><span class="token operator">:</span> <span class="token string">&quot;Livetti&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">eta</span><span class="token operator">:</span> <span class="token string">&quot;23&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">indirizzo</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">citta</span><span class="token operator">:</span> <span class="token string">&quot;Pistoia&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">via</span><span class="token operator">:</span> <span class="token string">&quot;Via Milano&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">cap</span><span class="token operator">:</span> <span class="token string">&quot;56113&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">interessi</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Ping pong&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Hockey&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;4&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">nome</span><span class="token operator">:</span> <span class="token string">&quot;Giovanni&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">cognome</span><span class="token operator">:</span> <span class="token string">&quot;Antonini&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">eta</span><span class="token operator">:</span> <span class="token string">&quot;23&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">indirizzo</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">citta</span><span class="token operator">:</span> <span class="token string">&quot;Pistoia&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">via</span><span class="token operator">:</span> <span class="token string">&quot;Via Milano&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">cap</span><span class="token operator">:</span> <span class="token string">&quot;56113&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">interessi</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Ping pong&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Hockey&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;5&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">nome</span><span class="token operator">:</span> <span class="token string">&quot;Metteo&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">cognome</span><span class="token operator">:</span> <span class="token string">&quot;Luisi&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">eta</span><span class="token operator">:</span> <span class="token string">&quot;23&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">indirizzo</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">citta</span><span class="token operator">:</span> <span class="token string">&quot;Pistoia&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">via</span><span class="token operator">:</span> <span class="token string">&quot;Via Milano&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">cap</span><span class="token operator">:</span> <span class="token string">&quot;56113&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">interessi</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Ping pong&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Hockey&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>persone<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="express-07" tabindex="-1"><a class="header-anchor" href="#express-07" aria-hidden="true">#</a> express - 07</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;express&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> persone <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./persone&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span>middlewareTest<span class="token punctuation">,</span> auth<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./middlewareTest&quot;</span><span class="token punctuation">)</span>

<span class="token comment">//con app.use posso usare il middleware su tutti</span>
<span class="token comment">// app.use(middlewareTest)</span>

<span class="token comment">//in questo modo applico il middleware solo ai percorsi che derivano da &#39;/persone&#39;</span>
<span class="token comment">// app.use(&#39;/persone&#39;,middlewareTest)</span>

<span class="token comment">//applico multipli middleware in cascata</span>
<span class="token comment">// app.use([middlewareTest, auth])</span>

<span class="token comment">//posso applicare i middleware a uno specifico rout passanodo un array ..</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>middlewareTest<span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;Homepage&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/about&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;About&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/area&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>middlewareTest<span class="token punctuation">,</span> auth<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;Area privata&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/persone&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;Persone&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/persone/ricche&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;Persone ricche&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/persone/povere&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;Persone povere&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//Middleware</span>
<span class="token comment">//Sono funzioni che vengono eseguitedurante la richiesta, tra la richiesta e la risposta.</span>
<span class="token comment">//In genere i middleware sono moduli</span>

<span class="token keyword">const</span> <span class="token function-variable function">middlewareTest</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> method<span class="token punctuation">,</span> url <span class="token punctuation">}</span> <span class="token operator">=</span> req<span class="token punctuation">;</span>
  <span class="token keyword">const</span> time <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMinutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;method&quot;</span><span class="token punctuation">,</span> method<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">//l&#39;url \xE8 &quot;relativo&quot;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;url&quot;</span><span class="token punctuation">,</span> url<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;time&quot;</span><span class="token punctuation">,</span> time<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">//next() \xE8 importante. Serve per passare allo &quot;step&quot; successivo</span>
  <span class="token comment">//senza next() non passa oltre e rimane bloccato</span>
  <span class="token comment">//potrei anche utilizzare res.send() ma a questo punto salto gli &quot;step&quot; successivi</span>
  <span class="token comment">//ad ogni modo next() o res.send() servono</span>
  <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">auth</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span>user<span class="token punctuation">}</span> <span class="token operator">=</span> req<span class="token punctuation">.</span>query<span class="token punctuation">;</span>
  <span class="token comment">//http://localhost:3000/area?user=Luca</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>user <span class="token operator">===</span> <span class="token string">&#39;Luca&#39;</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">401</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;Non autorizzato&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;accesso effettuato&#39;</span><span class="token punctuation">)</span>
  <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>


module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>middlewareTest<span class="token punctuation">,</span> auth<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> persone <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">nome</span><span class="token operator">:</span> <span class="token string">&quot;Luca&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">cognome</span><span class="token operator">:</span> <span class="token string">&quot;Rossi&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">eta</span><span class="token operator">:</span> <span class="token string">&quot;25&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">indirizzo</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">citta</span><span class="token operator">:</span> <span class="token string">&quot;Milano&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">via</span><span class="token operator">:</span> <span class="token string">&quot;Via Torino&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">cap</span><span class="token operator">:</span> <span class="token string">&quot;56789&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">interessi</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Calcio&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Tennis&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">nome</span><span class="token operator">:</span> <span class="token string">&quot;Marta&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">cognome</span><span class="token operator">:</span> <span class="token string">&quot;Neri&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">eta</span><span class="token operator">:</span> <span class="token string">&quot;25&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">indirizzo</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">citta</span><span class="token operator">:</span> <span class="token string">&quot;Lucca&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">via</span><span class="token operator">:</span> <span class="token string">&quot;Via Roma&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">cap</span><span class="token operator">:</span> <span class="token string">&quot;56111&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">interessi</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Calcio&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Basket&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">nome</span><span class="token operator">:</span> <span class="token string">&quot;Marco&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">cognome</span><span class="token operator">:</span> <span class="token string">&quot;Verdi&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">eta</span><span class="token operator">:</span> <span class="token string">&quot;23&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">indirizzo</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">citta</span><span class="token operator">:</span> <span class="token string">&quot;Pistoia&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">via</span><span class="token operator">:</span> <span class="token string">&quot;Via Milano&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">cap</span><span class="token operator">:</span> <span class="token string">&quot;56113&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">interessi</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Ping pong&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Hockey&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;3&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">nome</span><span class="token operator">:</span> <span class="token string">&quot;Maria&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">cognome</span><span class="token operator">:</span> <span class="token string">&quot;Livetti&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">eta</span><span class="token operator">:</span> <span class="token string">&quot;23&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">indirizzo</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">citta</span><span class="token operator">:</span> <span class="token string">&quot;Pistoia&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">via</span><span class="token operator">:</span> <span class="token string">&quot;Via Milano&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">cap</span><span class="token operator">:</span> <span class="token string">&quot;56113&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">interessi</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Ping pong&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Hockey&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;4&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">nome</span><span class="token operator">:</span> <span class="token string">&quot;Giovanni&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">cognome</span><span class="token operator">:</span> <span class="token string">&quot;Antonini&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">eta</span><span class="token operator">:</span> <span class="token string">&quot;23&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">indirizzo</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">citta</span><span class="token operator">:</span> <span class="token string">&quot;Pistoia&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">via</span><span class="token operator">:</span> <span class="token string">&quot;Via Milano&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">cap</span><span class="token operator">:</span> <span class="token string">&quot;56113&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">interessi</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Ping pong&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Hockey&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;5&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">nome</span><span class="token operator">:</span> <span class="token string">&quot;Metteo&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">cognome</span><span class="token operator">:</span> <span class="token string">&quot;Luisi&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">eta</span><span class="token operator">:</span> <span class="token string">&quot;23&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">indirizzo</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">citta</span><span class="token operator">:</span> <span class="token string">&quot;Pistoia&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">via</span><span class="token operator">:</span> <span class="token string">&quot;Via Milano&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">cap</span><span class="token operator">:</span> <span class="token string">&quot;56113&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">interessi</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Ping pong&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Hockey&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>persone<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="express-08" tabindex="-1"><a class="header-anchor" href="#express-08" aria-hidden="true">#</a> express - 08</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;express&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//postman -&gt; permette di testare richieste http. </span>
<span class="token comment">//Se apri postman e fai una get con localhost:3000/ vedrai che ti restituir\xE0 il risultato che hai del browser</span>

<span class="token comment">//questo \xE8 un middleware che ci permette di leggere un json in entrata</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;Homepage&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/utente&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">nome</span><span class="token operator">:</span> <span class="token string">&quot;Luca&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">cognome</span><span class="token operator">:</span> <span class="token string">&quot;Rossi&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&#39;/&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#39;ok post&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&#39;/&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#39;ok put&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token string">&#39;/&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#39;ok delete&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>



app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="express-09" tabindex="-1"><a class="header-anchor" href="#express-09" aria-hidden="true">#</a> express - 09</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> application <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;express&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;express&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span>persone<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./persone&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/api/persone&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">success</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">data</span><span class="token operator">:</span> persone<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//Prova da postman con:</span>
<span class="token comment">//localhost:3000/api/persone/2</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/api/persone/:id&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span>id<span class="token punctuation">}</span> <span class="token operator">=</span> req<span class="token punctuation">.</span>params
  <span class="token keyword">const</span> persona <span class="token operator">=</span> persone<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">persona</span> <span class="token operator">=&gt;</span> persona<span class="token punctuation">.</span>id <span class="token operator">===</span> id<span class="token punctuation">)</span>
  res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">success</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">data</span><span class="token operator">:</span> persona<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> persone <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">nome</span><span class="token operator">:</span> <span class="token string">&quot;Luca&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">cognome</span><span class="token operator">:</span> <span class="token string">&quot;Rossi&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">eta</span><span class="token operator">:</span> <span class="token string">&quot;25&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">indirizzo</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">citta</span><span class="token operator">:</span> <span class="token string">&quot;Milano&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">via</span><span class="token operator">:</span> <span class="token string">&quot;Via Torino&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">cap</span><span class="token operator">:</span> <span class="token string">&quot;56789&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">interessi</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Calcio&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Tennis&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">nome</span><span class="token operator">:</span> <span class="token string">&quot;Marta&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">cognome</span><span class="token operator">:</span> <span class="token string">&quot;Neri&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">eta</span><span class="token operator">:</span> <span class="token string">&quot;25&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">indirizzo</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">citta</span><span class="token operator">:</span> <span class="token string">&quot;Lucca&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">via</span><span class="token operator">:</span> <span class="token string">&quot;Via Roma&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">cap</span><span class="token operator">:</span> <span class="token string">&quot;56111&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">interessi</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Corsa&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Nuoto&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">nome</span><span class="token operator">:</span> <span class="token string">&quot;Marco&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">cognome</span><span class="token operator">:</span> <span class="token string">&quot;Verdi&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">eta</span><span class="token operator">:</span> <span class="token string">&quot;23&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">indirizzo</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">citta</span><span class="token operator">:</span> <span class="token string">&quot;Pistoia&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">via</span><span class="token operator">:</span> <span class="token string">&quot;Via Milano&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">cap</span><span class="token operator">:</span> <span class="token string">&quot;56113&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">interessi</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Tennis&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Hockey&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;3&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">nome</span><span class="token operator">:</span> <span class="token string">&quot;Maria&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">cognome</span><span class="token operator">:</span> <span class="token string">&quot;Livetti&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">eta</span><span class="token operator">:</span> <span class="token string">&quot;23&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">indirizzo</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">citta</span><span class="token operator">:</span> <span class="token string">&quot;Pistoia&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">via</span><span class="token operator">:</span> <span class="token string">&quot;viale delle erbe&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">cap</span><span class="token operator">:</span> <span class="token string">&quot;56113&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">interessi</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Lettura&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Basket&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;4&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">nome</span><span class="token operator">:</span> <span class="token string">&quot;Giovanni&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">cognome</span><span class="token operator">:</span> <span class="token string">&quot;Antonini&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">eta</span><span class="token operator">:</span> <span class="token string">&quot;22&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">indirizzo</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">citta</span><span class="token operator">:</span> <span class="token string">&quot;Navacchio&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">via</span><span class="token operator">:</span> <span class="token string">&quot;Via degli Ulivi&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">cap</span><span class="token operator">:</span> <span class="token string">&quot;67892&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">interessi</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Ping pong&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Serf&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;5&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">nome</span><span class="token operator">:</span> <span class="token string">&quot;Matteo&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">cognome</span><span class="token operator">:</span> <span class="token string">&quot;Luisi&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">eta</span><span class="token operator">:</span> <span class="token string">&quot;34&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">indirizzo</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">citta</span><span class="token operator">:</span> <span class="token string">&quot;Ro&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">via</span><span class="token operator">:</span> <span class="token string">&quot;Via Pergola&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">cap</span><span class="token operator">:</span> <span class="token string">&quot;45666&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">interessi</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Cucina&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Pugilato&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>persone<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="express-10" tabindex="-1"><a class="header-anchor" href="#express-10" aria-hidden="true">#</a> express - 10</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> application <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;express&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;express&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span>persone<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./persone&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/api/persone&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">success</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">data</span><span class="token operator">:</span> persone<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//Prova da postman con:</span>
<span class="token comment">//localhost:3000/api/persone/2</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/api/persone/:id&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span>id<span class="token punctuation">}</span> <span class="token operator">=</span> req<span class="token punctuation">.</span>params
  <span class="token keyword">const</span> persona <span class="token operator">=</span> persone<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">persona</span> <span class="token operator">=&gt;</span> persona<span class="token punctuation">.</span>id <span class="token operator">===</span> id<span class="token punctuation">)</span>
  res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">success</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">data</span><span class="token operator">:</span> persona<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//E&#39; stata aggiunta una persona..</span>
<span class="token comment">//Tuttavia non viene salvato nel file</span>
<span class="token comment">//prova a fare un esercizion con un form</span>
app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&#39;/api/persone&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> persona <span class="token operator">=</span> req<span class="token punctuation">.</span>body<span class="token punctuation">;</span>
  persone<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>persona<span class="token punctuation">)</span><span class="token punctuation">;</span>
  res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">success</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">data</span><span class="token operator">:</span>persone<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> persone <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">nome</span><span class="token operator">:</span> <span class="token string">&quot;Luca&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">cognome</span><span class="token operator">:</span> <span class="token string">&quot;Rossi&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">eta</span><span class="token operator">:</span> <span class="token string">&quot;25&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">indirizzo</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">citta</span><span class="token operator">:</span> <span class="token string">&quot;Milano&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">via</span><span class="token operator">:</span> <span class="token string">&quot;Via Torino&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">cap</span><span class="token operator">:</span> <span class="token string">&quot;56789&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">interessi</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Calcio&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Tennis&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">nome</span><span class="token operator">:</span> <span class="token string">&quot;Marta&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">cognome</span><span class="token operator">:</span> <span class="token string">&quot;Neri&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">eta</span><span class="token operator">:</span> <span class="token string">&quot;25&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">indirizzo</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">citta</span><span class="token operator">:</span> <span class="token string">&quot;Lucca&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">via</span><span class="token operator">:</span> <span class="token string">&quot;Via Roma&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">cap</span><span class="token operator">:</span> <span class="token string">&quot;56111&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">interessi</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Corsa&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Nuoto&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">nome</span><span class="token operator">:</span> <span class="token string">&quot;Marco&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">cognome</span><span class="token operator">:</span> <span class="token string">&quot;Verdi&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">eta</span><span class="token operator">:</span> <span class="token string">&quot;23&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">indirizzo</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">citta</span><span class="token operator">:</span> <span class="token string">&quot;Pistoia&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">via</span><span class="token operator">:</span> <span class="token string">&quot;Via Milano&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">cap</span><span class="token operator">:</span> <span class="token string">&quot;56113&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">interessi</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Tennis&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Hockey&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;3&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">nome</span><span class="token operator">:</span> <span class="token string">&quot;Maria&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">cognome</span><span class="token operator">:</span> <span class="token string">&quot;Livetti&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">eta</span><span class="token operator">:</span> <span class="token string">&quot;23&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">indirizzo</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">citta</span><span class="token operator">:</span> <span class="token string">&quot;Pistoia&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">via</span><span class="token operator">:</span> <span class="token string">&quot;viale delle erbe&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">cap</span><span class="token operator">:</span> <span class="token string">&quot;56113&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">interessi</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Lettura&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Basket&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;4&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">nome</span><span class="token operator">:</span> <span class="token string">&quot;Giovanni&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">cognome</span><span class="token operator">:</span> <span class="token string">&quot;Antonini&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">eta</span><span class="token operator">:</span> <span class="token string">&quot;22&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">indirizzo</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">citta</span><span class="token operator">:</span> <span class="token string">&quot;Navacchio&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">via</span><span class="token operator">:</span> <span class="token string">&quot;Via degli Ulivi&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">cap</span><span class="token operator">:</span> <span class="token string">&quot;67892&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">interessi</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Ping pong&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Serf&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;5&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">nome</span><span class="token operator">:</span> <span class="token string">&quot;Matteo&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">cognome</span><span class="token operator">:</span> <span class="token string">&quot;Luisi&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">eta</span><span class="token operator">:</span> <span class="token string">&quot;34&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">indirizzo</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">citta</span><span class="token operator">:</span> <span class="token string">&quot;Ro&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">via</span><span class="token operator">:</span> <span class="token string">&quot;Via Pergola&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">cap</span><span class="token operator">:</span> <span class="token string">&quot;45666&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">interessi</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Cucina&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Pugilato&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>persone<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="express-11" tabindex="-1"><a class="header-anchor" href="#express-11" aria-hidden="true">#</a> express - 11</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> application <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;express&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;express&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span>persone<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./persone&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/api/persone&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">success</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">data</span><span class="token operator">:</span> persone<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//Prova da postman con:</span>
<span class="token comment">//localhost:3000/api/persone/2</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/api/persone/:id&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span>id<span class="token punctuation">}</span> <span class="token operator">=</span> req<span class="token punctuation">.</span>params
  <span class="token keyword">const</span> persona <span class="token operator">=</span> persone<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">persona</span> <span class="token operator">=&gt;</span> persona<span class="token punctuation">.</span>id <span class="token operator">===</span> id<span class="token punctuation">)</span>
  res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">success</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">data</span><span class="token operator">:</span> persona<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//E&#39; stata aggiunta una persona..</span>
<span class="token comment">//Tuttavia non viene salvato nel file</span>
<span class="token comment">//prova a fare un esercizion con un form</span>
app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&#39;/api/persone&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> persona <span class="token operator">=</span> req<span class="token punctuation">.</span>body<span class="token punctuation">;</span>
  persone<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>persona<span class="token punctuation">)</span><span class="token punctuation">;</span>
  res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">success</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">data</span><span class="token operator">:</span>persone<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//serve per modificare</span>
app<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&#39;/api/persone/:id&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span>id<span class="token punctuation">}</span> <span class="token operator">=</span> req<span class="token punctuation">.</span>params<span class="token punctuation">;</span>
  <span class="token keyword">const</span> persona <span class="token operator">=</span> req<span class="token punctuation">.</span>body<span class="token punctuation">;</span>
  persone<span class="token punctuation">[</span><span class="token function">Number</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> persona<span class="token punctuation">;</span>
  res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">success</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">data</span><span class="token operator">:</span> persone<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>


app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> persone <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">nome</span><span class="token operator">:</span> <span class="token string">&quot;Luca&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">cognome</span><span class="token operator">:</span> <span class="token string">&quot;Rossi&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">eta</span><span class="token operator">:</span> <span class="token string">&quot;25&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">indirizzo</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">citta</span><span class="token operator">:</span> <span class="token string">&quot;Milano&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">via</span><span class="token operator">:</span> <span class="token string">&quot;Via Torino&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">cap</span><span class="token operator">:</span> <span class="token string">&quot;56789&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">interessi</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Calcio&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Tennis&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">nome</span><span class="token operator">:</span> <span class="token string">&quot;Marta&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">cognome</span><span class="token operator">:</span> <span class="token string">&quot;Neri&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">eta</span><span class="token operator">:</span> <span class="token string">&quot;25&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">indirizzo</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">citta</span><span class="token operator">:</span> <span class="token string">&quot;Lucca&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">via</span><span class="token operator">:</span> <span class="token string">&quot;Via Roma&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">cap</span><span class="token operator">:</span> <span class="token string">&quot;56111&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">interessi</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Corsa&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Nuoto&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">nome</span><span class="token operator">:</span> <span class="token string">&quot;Marco&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">cognome</span><span class="token operator">:</span> <span class="token string">&quot;Verdi&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">eta</span><span class="token operator">:</span> <span class="token string">&quot;23&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">indirizzo</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">citta</span><span class="token operator">:</span> <span class="token string">&quot;Pistoia&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">via</span><span class="token operator">:</span> <span class="token string">&quot;Via Milano&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">cap</span><span class="token operator">:</span> <span class="token string">&quot;56113&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">interessi</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Tennis&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Hockey&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;3&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">nome</span><span class="token operator">:</span> <span class="token string">&quot;Maria&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">cognome</span><span class="token operator">:</span> <span class="token string">&quot;Livetti&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">eta</span><span class="token operator">:</span> <span class="token string">&quot;23&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">indirizzo</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">citta</span><span class="token operator">:</span> <span class="token string">&quot;Pistoia&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">via</span><span class="token operator">:</span> <span class="token string">&quot;viale delle erbe&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">cap</span><span class="token operator">:</span> <span class="token string">&quot;56113&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">interessi</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Lettura&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Basket&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;4&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">nome</span><span class="token operator">:</span> <span class="token string">&quot;Giovanni&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">cognome</span><span class="token operator">:</span> <span class="token string">&quot;Antonini&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">eta</span><span class="token operator">:</span> <span class="token string">&quot;22&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">indirizzo</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">citta</span><span class="token operator">:</span> <span class="token string">&quot;Navacchio&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">via</span><span class="token operator">:</span> <span class="token string">&quot;Via degli Ulivi&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">cap</span><span class="token operator">:</span> <span class="token string">&quot;67892&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">interessi</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Ping pong&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Serf&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;5&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">nome</span><span class="token operator">:</span> <span class="token string">&quot;Matteo&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">cognome</span><span class="token operator">:</span> <span class="token string">&quot;Luisi&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">eta</span><span class="token operator">:</span> <span class="token string">&quot;34&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">indirizzo</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">citta</span><span class="token operator">:</span> <span class="token string">&quot;Ro&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">via</span><span class="token operator">:</span> <span class="token string">&quot;Via Pergola&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">cap</span><span class="token operator">:</span> <span class="token string">&quot;45666&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">interessi</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Cucina&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Pugilato&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>persone<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="express-12" tabindex="-1"><a class="header-anchor" href="#express-12" aria-hidden="true">#</a> express - 12</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> application <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;express&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;express&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span>persone<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./persone&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/api/persone&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">success</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">data</span><span class="token operator">:</span> persone<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//Prova da postman con:</span>
<span class="token comment">//localhost:3000/api/persone/2</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/api/persone/:id&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span>id<span class="token punctuation">}</span> <span class="token operator">=</span> req<span class="token punctuation">.</span>params
  <span class="token keyword">const</span> persona <span class="token operator">=</span> persone<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">persona</span> <span class="token operator">=&gt;</span> persona<span class="token punctuation">.</span>id <span class="token operator">===</span> id<span class="token punctuation">)</span>
  res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">success</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">data</span><span class="token operator">:</span> persona<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//E&#39; stata aggiunta una persona..</span>
<span class="token comment">//Tuttavia non viene salvato nel file</span>
<span class="token comment">//prova a fare un esercizion con un form</span>
app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&#39;/api/persone&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> persona <span class="token operator">=</span> req<span class="token punctuation">.</span>body<span class="token punctuation">;</span>
  persone<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>persona<span class="token punctuation">)</span><span class="token punctuation">;</span>
  res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">success</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">data</span><span class="token operator">:</span>persone<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//serve per modificare</span>
app<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&#39;/api/persone/:id&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span>id<span class="token punctuation">}</span> <span class="token operator">=</span> req<span class="token punctuation">.</span>params<span class="token punctuation">;</span>
  <span class="token keyword">const</span> persona <span class="token operator">=</span> req<span class="token punctuation">.</span>body<span class="token punctuation">;</span>
  persone<span class="token punctuation">[</span><span class="token function">Number</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> persona<span class="token punctuation">;</span>
  res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">success</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">data</span><span class="token operator">:</span> persone<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token string">&#39;/api/persone/:id&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>params<span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span>id<span class="token punctuation">}</span> <span class="token operator">=</span> req<span class="token punctuation">.</span>params<span class="token punctuation">;</span>
  <span class="token keyword">const</span> idx <span class="token operator">=</span> persone<span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span><span class="token parameter">persona</span> <span class="token operator">=&gt;</span> persona<span class="token punctuation">.</span>id <span class="token operator">===</span> id<span class="token punctuation">)</span>
  persone<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>idx<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">success</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">data</span><span class="token operator">:</span>persone<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> persone <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">nome</span><span class="token operator">:</span> <span class="token string">&quot;Luca&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">cognome</span><span class="token operator">:</span> <span class="token string">&quot;Rossi&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">eta</span><span class="token operator">:</span> <span class="token string">&quot;25&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">indirizzo</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">citta</span><span class="token operator">:</span> <span class="token string">&quot;Milano&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">via</span><span class="token operator">:</span> <span class="token string">&quot;Via Torino&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">cap</span><span class="token operator">:</span> <span class="token string">&quot;56789&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">interessi</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Calcio&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Tennis&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">nome</span><span class="token operator">:</span> <span class="token string">&quot;Marta&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">cognome</span><span class="token operator">:</span> <span class="token string">&quot;Neri&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">eta</span><span class="token operator">:</span> <span class="token string">&quot;25&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">indirizzo</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">citta</span><span class="token operator">:</span> <span class="token string">&quot;Lucca&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">via</span><span class="token operator">:</span> <span class="token string">&quot;Via Roma&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">cap</span><span class="token operator">:</span> <span class="token string">&quot;56111&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">interessi</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Corsa&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Nuoto&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">nome</span><span class="token operator">:</span> <span class="token string">&quot;Marco&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">cognome</span><span class="token operator">:</span> <span class="token string">&quot;Verdi&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">eta</span><span class="token operator">:</span> <span class="token string">&quot;23&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">indirizzo</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">citta</span><span class="token operator">:</span> <span class="token string">&quot;Pistoia&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">via</span><span class="token operator">:</span> <span class="token string">&quot;Via Milano&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">cap</span><span class="token operator">:</span> <span class="token string">&quot;56113&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">interessi</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Tennis&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Hockey&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;3&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">nome</span><span class="token operator">:</span> <span class="token string">&quot;Maria&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">cognome</span><span class="token operator">:</span> <span class="token string">&quot;Livetti&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">eta</span><span class="token operator">:</span> <span class="token string">&quot;23&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">indirizzo</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">citta</span><span class="token operator">:</span> <span class="token string">&quot;Pistoia&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">via</span><span class="token operator">:</span> <span class="token string">&quot;viale delle erbe&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">cap</span><span class="token operator">:</span> <span class="token string">&quot;56113&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">interessi</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Lettura&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Basket&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;4&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">nome</span><span class="token operator">:</span> <span class="token string">&quot;Giovanni&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">cognome</span><span class="token operator">:</span> <span class="token string">&quot;Antonini&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">eta</span><span class="token operator">:</span> <span class="token string">&quot;22&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">indirizzo</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">citta</span><span class="token operator">:</span> <span class="token string">&quot;Navacchio&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">via</span><span class="token operator">:</span> <span class="token string">&quot;Via degli Ulivi&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">cap</span><span class="token operator">:</span> <span class="token string">&quot;67892&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">interessi</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Ping pong&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Serf&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;5&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">nome</span><span class="token operator">:</span> <span class="token string">&quot;Matteo&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">cognome</span><span class="token operator">:</span> <span class="token string">&quot;Luisi&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">eta</span><span class="token operator">:</span> <span class="token string">&quot;34&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">indirizzo</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">citta</span><span class="token operator">:</span> <span class="token string">&quot;Ro&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">via</span><span class="token operator">:</span> <span class="token string">&quot;Via Pergola&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">cap</span><span class="token operator">:</span> <span class="token string">&quot;45666&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">interessi</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Cucina&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Pugilato&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>persone<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="express-13" tabindex="-1"><a class="header-anchor" href="#express-13" aria-hidden="true">#</a> express - 13</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;express&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> personeRouter <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./routs/persone&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> prodottiRouter <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./routs/prodotti&#39;</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">&#39;/api/persone&#39;</span><span class="token punctuation">,</span> personeRouter<span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">&#39;/api/prodotti&#39;</span><span class="token punctuation">,</span> prodottiRouter<span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;express&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> persone <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;../persone&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> express<span class="token punctuation">.</span><span class="token function">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">success</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">data</span><span class="token operator">:</span> persone <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/:id&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> id <span class="token punctuation">}</span> <span class="token operator">=</span> req<span class="token punctuation">.</span>params<span class="token punctuation">;</span>
  <span class="token keyword">const</span> persona <span class="token operator">=</span> persone<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">persona</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> persona<span class="token punctuation">.</span>id <span class="token operator">===</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
  res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">success</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">data</span><span class="token operator">:</span> persona <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

router<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> persona <span class="token operator">=</span> req<span class="token punctuation">.</span>body<span class="token punctuation">;</span>
  persone<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>persona<span class="token punctuation">)</span><span class="token punctuation">;</span>
  res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">success</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">data</span><span class="token operator">:</span> persone <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

router<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;/:id&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> id <span class="token punctuation">}</span> <span class="token operator">=</span> req<span class="token punctuation">.</span>params<span class="token punctuation">;</span>
  <span class="token keyword">const</span> persona <span class="token operator">=</span> req<span class="token punctuation">.</span>body<span class="token punctuation">;</span>
  persone<span class="token punctuation">[</span><span class="token function">Number</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> persona<span class="token punctuation">;</span>
  res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">success</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">data</span><span class="token operator">:</span> persone <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

router<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token string">&quot;/:id&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> id <span class="token punctuation">}</span> <span class="token operator">=</span> req<span class="token punctuation">.</span>params<span class="token punctuation">;</span>
  <span class="token keyword">const</span> idx <span class="token operator">=</span> persone<span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">persona</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> persona<span class="token punctuation">.</span>id <span class="token operator">===</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
  persone<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>idx<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">success</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">data</span><span class="token operator">:</span> persone <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> router<span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;express&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> express<span class="token punctuation">.</span><span class="token function">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">success</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">nome</span><span class="token operator">:</span> <span class="token string">&quot;sedia&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">costo</span><span class="token operator">:</span> <span class="token string">&quot;35E&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> router<span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> persone <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">nome</span><span class="token operator">:</span> <span class="token string">&quot;Luca&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">cognome</span><span class="token operator">:</span> <span class="token string">&quot;Rossi&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">eta</span><span class="token operator">:</span> <span class="token string">&quot;25&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">indirizzo</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">citta</span><span class="token operator">:</span> <span class="token string">&quot;Milano&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">via</span><span class="token operator">:</span> <span class="token string">&quot;Via Torino&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">cap</span><span class="token operator">:</span> <span class="token string">&quot;56789&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">interessi</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Calcio&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Tennis&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">nome</span><span class="token operator">:</span> <span class="token string">&quot;Marta&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">cognome</span><span class="token operator">:</span> <span class="token string">&quot;Neri&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">eta</span><span class="token operator">:</span> <span class="token string">&quot;25&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">indirizzo</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">citta</span><span class="token operator">:</span> <span class="token string">&quot;Lucca&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">via</span><span class="token operator">:</span> <span class="token string">&quot;Via Roma&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">cap</span><span class="token operator">:</span> <span class="token string">&quot;56111&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">interessi</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Corsa&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Nuoto&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">nome</span><span class="token operator">:</span> <span class="token string">&quot;Marco&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">cognome</span><span class="token operator">:</span> <span class="token string">&quot;Verdi&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">eta</span><span class="token operator">:</span> <span class="token string">&quot;23&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">indirizzo</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">citta</span><span class="token operator">:</span> <span class="token string">&quot;Pistoia&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">via</span><span class="token operator">:</span> <span class="token string">&quot;Via Milano&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">cap</span><span class="token operator">:</span> <span class="token string">&quot;56113&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">interessi</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Tennis&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Hockey&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;3&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">nome</span><span class="token operator">:</span> <span class="token string">&quot;Maria&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">cognome</span><span class="token operator">:</span> <span class="token string">&quot;Livetti&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">eta</span><span class="token operator">:</span> <span class="token string">&quot;23&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">indirizzo</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">citta</span><span class="token operator">:</span> <span class="token string">&quot;Pistoia&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">via</span><span class="token operator">:</span> <span class="token string">&quot;viale delle erbe&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">cap</span><span class="token operator">:</span> <span class="token string">&quot;56113&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">interessi</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Lettura&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Basket&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;4&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">nome</span><span class="token operator">:</span> <span class="token string">&quot;Giovanni&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">cognome</span><span class="token operator">:</span> <span class="token string">&quot;Antonini&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">eta</span><span class="token operator">:</span> <span class="token string">&quot;22&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">indirizzo</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">citta</span><span class="token operator">:</span> <span class="token string">&quot;Navacchio&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">via</span><span class="token operator">:</span> <span class="token string">&quot;Via degli Ulivi&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">cap</span><span class="token operator">:</span> <span class="token string">&quot;67892&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">interessi</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Ping pong&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Serf&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;5&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">nome</span><span class="token operator">:</span> <span class="token string">&quot;Matteo&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">cognome</span><span class="token operator">:</span> <span class="token string">&quot;Luisi&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">eta</span><span class="token operator">:</span> <span class="token string">&quot;34&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">indirizzo</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">citta</span><span class="token operator">:</span> <span class="token string">&quot;Ro&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">via</span><span class="token operator">:</span> <span class="token string">&quot;Via Pergola&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">cap</span><span class="token operator">:</span> <span class="token string">&quot;45666&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">interessi</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Cucina&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Pugilato&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>persone<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="mongodb" tabindex="-1"><a class="header-anchor" href="#mongodb" aria-hidden="true">#</a> Mongodb</h2>`,60),xn=n("Per l'installazione di "),wn=s("a",{href:""},"mongodb",-1),jn=n(" su linux segui la "),zn={href:"https://docs.mongodb.com/manual/tutorial/install-mongodb-on-ubuntu/",target:"_blank",rel:"noopener noreferrer"},_n=n("guida ufficiale"),Pn=n(". Installa anche "),Ln={href:"https://docs.mongodb.com/compass/current/install/",target:"_blank",rel:"noopener noreferrer"},Mn=n("compass"),Vn=n(", ti servir\xE0 per una gestione da GUI di mongo db"),Tn=p(`<p>Per far partire mongo db:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> systemctl start mongod
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Per stoppare il processo</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> systemctl stop mongod
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Per verificare lo stato di mongodb</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> systemctl status mongod
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Per far partire una sessione</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>mongosh
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="comandi" tabindex="-1"><a class="header-anchor" href="#comandi" aria-hidden="true">#</a> Comandi</h3><p>Mostra i database locali</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>test<span class="token operator">&gt;</span> show dbs
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Crea un database</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>test<span class="token operator">&gt;</span> use mydb
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Crea una collection</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>mydb<span class="token operator">&gt;</span> db.utenti
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Aggiundi un documento, un oggetto</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>db.utenti.insertOne<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;nome&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;Luca&quot;</span>, <span class="token string">&quot;cognome&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;Rossi&quot;</span>, <span class="token string">&quot;citta&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;Lucca&quot;</span>, <span class="token string">&quot;eta&quot;</span><span class="token builtin class-name">:</span> <span class="token number">41</span><span class="token punctuation">}</span><span class="token punctuation">)</span>


<span class="token punctuation">{</span>
  acknowledged: true,
  insertedId: ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61c9e5bede4c093ee7fa6b67&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Inserisci pi\xF9 oggetti, documenti</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>db.utenti.insertMany<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;nome&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;Luca&quot;</span>, <span class="token string">&quot;cognome&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;Rossi&quot;</span>, <span class="token string">&quot;citta&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;Lucca&quot;</span>, <span class="token string">&quot;eta&quot;</span><span class="token builtin class-name">:</span> <span class="token number">41</span><span class="token punctuation">}</span>, <span class="token punctuation">{</span><span class="token string">&quot;nome&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;Matteo&quot;</span>, <span class="token string">&quot;cognome&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;Andrei&quot;</span>, <span class="token string">&quot;citta&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;Padova&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token punctuation">{</span>
  acknowledged: true,
  insertedIds: <span class="token punctuation">{</span>
    <span class="token string">&#39;0&#39;</span><span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61c9e64dde4c093ee7fa6b68&quot;</span><span class="token punctuation">)</span>,
    <span class="token string">&#39;1&#39;</span><span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61c9e64dde4c093ee7fa6b69&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Posso vedere questo database su <code>compass</code>.</p><p>Come puoi notare posso inserire qualsiasi tipo oggetto json-like senza nessun controllo dello schema.</p>`,21);function Nn(Cn,In){const a=i("ExternalLinkIcon");return e(),c("div",null,[r,s("p",null,[s("a",k,[d,t(a)]),v]),m,s("p",null,[g,s("a",b,[q,t(a)])]),y,s("p",null,[h,f,x,s("a",w,[j,t(a)]),z]),_,s("p",null,[P,s("a",L,[M,t(a)]),V]),T,N,s("ul",null,[s("li",null,[s("a",C,[I,t(a)]),A])]),E,s("ul",null,[s("li",null,[s("a",R,[F,t(a)]),S])]),H,s("ul",null,[s("li",null,[s("a",G,[B,t(a)]),U,D,J,O,X])]),Z,s("p",null,[Q,s("a",W,[Y,t(a)]),$]),K,s("p",null,[s("a",nn,[sn,t(a)]),an]),tn,s("p",null,[pn,s("a",on,[en,t(a)]),cn]),s("p",null,[ln,s("a",un,[rn,t(a)]),kn]),dn,s("p",null,[vn,s("a",mn,[gn,t(a)]),bn,s("a",qn,[yn,t(a)]),hn]),fn,s("p",null,[xn,wn,jn,s("a",zn,[_n,t(a)]),Pn,s("a",Ln,[Mn,t(a)]),Vn]),Tn])}var En=o(u,[["render",Nn],["__file","index.html.vue"]]);export{En as default};
